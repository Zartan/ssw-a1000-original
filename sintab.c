/*
 * Copyright 1993, 1995 James Cleverdon.  All rights reserved.
 *
 * sintab.c -- integer sine/cosine equivalents
 *
 * This file is part of Solar System Wars (SSW).
 *
 * This version of SSW is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by the
 * Free Software Foundation, either version 3 of the License, or (at your
 * option) any later version.
 *
 * SSW is distributed in the hope that it will be useful, but WITHOUT ANY
 * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
 * FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more
 * details.
 *
 * You should have received a copy of the GNU General Public License along
 * with SSW.  If not, see <https://www.gnu.org/licenses/>. 
 *
 */

#ident "$Id: sintab.c 1.2 1997/01/19 07:04:58 jamesc Exp jamesc $"

#include "ssw.h"

#define NUM_A32 32
#define MAX_A32 (NUM_A32 - 1)


Static long	sintab[NUM_ANGLES] = {
	0, 1605090, 2965820, 3875031, 4194304, 3875031, 2965820, 1605090,
	0,-1605090,-2965820,-3875031,-4194304,-3875031,-2965820,-1605090,
};

Static long	sint_a32[NUM_A32] = {
	0,  818268, 1605090, 2330230, 2965820, 3487436, 3875031, 4113711,
  4194304, 4113711, 3875031, 3487436, 2965820, 2330230, 1605090,  818268,
	0, -818268,-1605090,-2330230,-2965820,-3487436,-3875031,-4113711,
 -4194304,-4113711,-3875031,-3487436,-2965820,-2330230,-1605090, -818268,
};

long
sine(long a)
{
	return (sintab[a & MAX_ANGLES]);
}

long
cosine(long a)
{
	return (sintab[(a + NUM_ANGLES / 4) & MAX_ANGLES]);
}

long
sin32(long a)
{
	return (sint_a32[a & MAX_A32]);
}

long
cos32(long a)
{
	return (sint_a32[(a + NUM_A32 / 4) & MAX_A32]);
}


/* I'm putting this stuff here because blink keeps thinking its
 * undefined when I put it in the data section of mult64.a
 */
unsigned long	seed6 = 0x12345678, seed7 = 0x9abcdef0;

#if 0
unsigned long	root_4_tbl[] = {
 0x00000000, 0x00000001, 0x00000010, 0x00000051,
 0x00000100, 0x00000271, 0x00000510, 0x00000961,
 0x00001000, 0x000019A1, 0x00002710, 0x00003931,
 0x00005100, 0x00006F91, 0x00009610, 0x0000C5C1,
 0x00010000, 0x00014641, 0x00019A10, 0x0001FD11,
 0x00027100, 0x0002F7B1, 0x00039310, 0x00044521,
 0x00051000, 0x0005F5E1, 0x0006F910, 0x00081BF1,
 0x00096100, 0x000ACAD1, 0x000C5C10, 0x000E1781,
 0x00100000, 0x00121881, 0x00146410, 0x0016E5D1,
 0x0019A100, 0x001C98F1, 0x001FD110, 0x00234CE1,
 0x00271000, 0x002B1E21, 0x002F7B10, 0x00342AB1,
 0x00393100, 0x003E9211, 0x00445210, 0x004A7541,
 0x00510000, 0x0057F6C1, 0x005F5E10, 0x00673A91,
 0x006F9100, 0x00786631, 0x0081BF10, 0x008BA0A1,
 0x00961000, 0x00A11261, 0x00ACAD10, 0x00B8E571,
 0x00C5C100, 0x00D34551, 0x00E17810, 0x00F05F01,
 0x01000000, 0x01106101, 0x01218810, 0x01337B51,
 0x01464100, 0x0159DF71, 0x016E5D10, 0x0183C061,
 0x019A1000, 0x01B152A1, 0x01C98F10, 0x01E2CC31,
 0x01FD1100, 0x02186491, 0x0234CE10, 0x025254C1,
 0x02710000, 0x0290D741, 0x02B1E210, 0x02D42811,
 0x02F7B100, 0x031C84B1, 0x0342AB10, 0x036A2C21,
 0x03931000, 0x03BD5EE1, 0x03E92110, 0x04165EF1,
 0x04452100, 0x04756FD1, 0x04A75410, 0x04DAD681,
 0x05100000, 0x0546D981, 0x057F6C10, 0x05B9C0D1,
 0x05F5E100, 0x0633D5F1, 0x0673A910, 0x06B563E1,
 0x06F91000, 0x073EB721, 0x07866310, 0x07D01DB1,
 0x081BF100, 0x0869E711, 0x08BA0A10, 0x090C6441,
 0x09610000, 0x09B7E7C1, 0x0A112610, 0x0A6CC591,
 0x0ACAD100, 0x0B2B5331, 0x0B8E5710, 0x0BF3E7A1,
 0x0C5C1000, 0x0CC6DB61, 0x0D345510, 0x0DA48871,
 0x0E178100, 0x0E8D4A51, 0x0F05F010, 0x0F817E01,
 0x10000000, 0x10818201, 0x11061010, 0x118DB651,
 0x12188100, 0x12A67C71, 0x1337B510, 0x13CC3761,
 0x14641000, 0x14FF4BA1, 0x159DF710, 0x16401F31,
 0x16E5D100, 0x178F1991, 0x183C0610, 0x18ECA3C1,
 0x19A10000, 0x1A592841, 0x1B152A10, 0x1BD51311,
 0x1C98F100, 0x1D60D1B1, 0x1E2CC310, 0x1EFCD321,
 0x1FD11000, 0x20A987E1, 0x21864910, 0x226761F1,
 0x234CE100, 0x2436D4D1, 0x25254C10, 0x26185581,
 0x27100000, 0x280C5A81, 0x290D7410, 0x2A135BD1,
 0x2B1E2100, 0x2C2DD2F1, 0x2D428110, 0x2E5C3AE1,
 0x2F7B1000, 0x309F1021, 0x31C84B10, 0x32F6D0B1,
 0x342AB100, 0x3563FC11, 0x36A2C210, 0x37E71341,
 0x39310000, 0x3A8098C1, 0x3BD5EE10, 0x3D311091,
 0x3E921100, 0x3FF90031, 0x4165EF10, 0x42D8EEA1,
 0x44521000, 0x45D16461, 0x4756FD10, 0x48E2EB71,
 0x4A754100, 0x4C0E0F51, 0x4DAD6810, 0x4F535D01,
 0x51000000, 0x52B36301, 0x546D9810, 0x562EB151,
 0x57F6C100, 0x59C5D971, 0x5B9C0D10, 0x5D796E61,
 0x5F5E1000, 0x614A04A1, 0x633D5F10, 0x65383231,
 0x673A9100, 0x69448E91, 0x6B563E10, 0x6D6FB2C1,
 0x6F910000, 0x71BA3941, 0x73EB7210, 0x7624BE11,
 0x78663100, 0x7AAFDEB1, 0x7D01DB10, 0x7F5C3A21,
 0x81BF1000, 0x842A70E1, 0x869E7110, 0x891B24F1,
 0x8BA0A100, 0x8E2EF9D1, 0x90C64410, 0x93669481,
 0x96100000, 0x98C29B81, 0x9B7E7C10, 0x9E43B6D1,
 0xA1126100, 0xA3EA8FF1, 0xA6CC5910, 0xA9B7D1E1,
 0xACAD1000, 0xAFAC2921, 0xB2B53310, 0xB5C843B1,
 0xB8E57100, 0xBC0CD111, 0xBF3E7A10, 0xC27A8241,
 0xC5C10000, 0xC91209C1, 0xCC6DB610, 0xCFD41B91,
 0xD3455100, 0xD6C16D31, 0xDA488710, 0xDDDAB5A1,
 0xE1781000, 0xE520AD61, 0xE8D4A510, 0xEC940E71,
 0xF05F0100, 0xF4359451, 0xF817E010, 0xFC05FC01,
 0xFFFFFFFF
};
#endif /* 0 */

/* #define BUILD_SINTAB  /* build the table */

#ifdef BUILD_SINTAB

#include <stdio.h>
#include <math.h>

#define FACTOR	CD_UNIT

#define TWO_PI	(2.0 * PI)

extern double	sin(double);
extern void	exit(int);

void
main(void)
{
	register double a;
	register int	i;

	for (i = 0, a = 0.0; a < TWO_PI; a += TWO_PI / NUM_ANGLES, i++)
		printf("%8ld,%s", (long)(sin(a) * FACTOR),
		  ((i & 7) == 7) ? "\n" : "");

	printf("\n");
	for (i = 0, a = 0.0; a < TWO_PI; a += TWO_PI / NUM_A32, i++)
		printf("%8ld,%s", (long)(sin(a) * FACTOR),
		  ((i & 7) == 7) ? "\n" : "");

	fflush(stdout);
	exit(0);
}

#endif /* BUILD_SINTAB */

